var huluPage=function(){"use strict";function h(e){return e==null||typeof e=="function"?{main:e}:e}function p(e,f){const r=e.lastIndexOf(".");let c=f;if(r!==-1){c=e.substring(r+1);const m=c.indexOf("?");m!==-1&&(c=c.substring(0,m))}return c}const y=e=>({id:w(e),...e}),w=e=>`${e.language}:${e.label}:${e.url}`,_=h(()=>{setTimeout(()=>{function e(t){return typeof t=="object"&&!Array.isArray(t)&&t!==null}function f(t){var i;const n=[];if(e((i=t.transcripts_urls)==null?void 0:i.webvtt)){const s=t.transcripts_urls.webvtt;for(const a of Object.keys(s)){const d=s[a];typeof d=="string"&&n.find(g=>g.label===g.language)===void 0&&n.push(y({label:a,language:a.toLowerCase(),url:d,extension:p(d,"vtt")}))}}return n}let r;function c(t){return r==null||r.abort(),new Promise((n,i)=>{setTimeout(()=>{r==null||r.abort(),r=new AbortController,fetch("https://play.hulu.com/v6/playlist",{method:"POST",credentials:"include",headers:{"content-type":"application/json"},body:t,signal:r.signal}).then(s=>s.json()).then(s=>n(f(s))).catch(i)},0)})}function m(t){if((t==null?void 0:t.items)instanceof Array&&t.items.length>0){const n=t.items[0];return n.series_name&&n.season_short_display_name&&n.number&&n.name?`${n.series_name}.${n.season_short_display_name}.E${n.number} - ${n.name}`:n.name??""}return""}let o;function $(t){return o==null||o.abort(),new Promise((n,i)=>{setTimeout(()=>{o==null||o.abort(),o=new AbortController,fetch(`https://discover.hulu.com/content/v3/browse/upnext?current_eab=${encodeURIComponent(t)}&referral_host=www.hulu.com&schema=4`,{signal:o.signal}).then(s=>s.json()).then(s=>n(m(s))).catch(i)},0)})}let l,b;const E=JSON.stringify;JSON.stringify=function(t){const n=E.apply(this,arguments);return typeof(t==null?void 0:t.content_eab_id)=="string"&&typeof(t==null?void 0:t.playback)=="object"&&(t==null?void 0:t.playback)!==null&&(l=c(n),b=$(t.content_eab_id)),n},document.addEventListener("asbplayer-get-synced-data",async()=>{let t="",n=[],i="";try{b!==void 0&&(t=await b,b=void 0),l!==void 0&&(n=await l,l=void 0)}catch(a){a instanceof Error?i=a.message:i=String(a)}const s={error:i,basename:t,subtitles:n};document.dispatchEvent(new CustomEvent("asbplayer-synced-data",{detail:s}))},!1)},0)});function P(){}function u(e,...f){}const x={debug:(...e)=>u(console.debug,...e),log:(...e)=>u(console.log,...e),warn:(...e)=>u(console.warn,...e),error:(...e)=>u(console.error,...e)};return(async()=>{try{return await _.main()}catch(e){throw x.error('The unlisted script "hulu-page" crashed on startup!',e),e}})()}();
huluPage;
